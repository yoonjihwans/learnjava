<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>회원가입</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
        .custom-container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        .form-container {
            width: 100%;
            max-width: 600px;
            padding: 24px;
            border: 1px solid #ffffff;
            border-radius: 8px;
        }

        .error-message {
            color: red;
            font-size: 0.75em;
            margin-top: 0.2em;
        }

        .info {
            color: #666;
            font-size: 0.8em;
        }
    </style>
</head>
<body>
    <div class="custom-container">
        <div class="form-container">
            <h1 class="my-4 text-center">회원가입</h1>
            <form onsubmit="return validateForm()" action="sign_up_success.html" method="post">
                <div class="mb-3 row">
                    <label for="userId" class="col-sm-4 col-form-label">아이디</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" id="userId" name="userId" placeholder="아이디를 입력하세요" autofocus>
                        <div class="info">(영문소문자/숫자, 4~16자)</div>
                        <div class="error-message" id="idError"></div>
                    </div>
                </div>
                <div class="mb-3 row">
                    <label for="userPw" class="col-sm-4 col-form-label">비밀번호</label>
                    <div class="col-sm-8">
                        <input type="password" class="form-control" id="userPw" name="userPw" placeholder="비밀번호를 입력하세요">
                        <div class="info">(영문 대소문자/숫자/특수문자 중 2가지 이상 조합, 10~16자)</div>
                        <div class="error-message" id="passwordError"></div>
                    </div>
                </div>
                <div class="mb-3 row">
                    <label for="confirmPw" class="col-sm-4 col-form-label">비밀번호 확인</label>
                    <div class="col-sm-8">
                        <input type="password" class="form-control" id="confirmPw" name="confirmPw" placeholder="비밀번호를 다시 입력하세요">
                        <div class="error-message" id="confirmPwError"></div>
                    </div>
                </div>
                <div class="mb-3 row">
                    <label for="userName" class="col-sm-4 col-form-label">이름</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" id="userName" name="userName" placeholder="이름을 입력하세요">
                        <div class="error-message" id="nameError"></div>
                    </div>
                </div>
                <div class="mb-3 row">
                    <label for="sample6_postcode" class="col-sm-4 col-form-label">우편번호</label>
                    <div class="col-sm-8">
                        <div class="input-group">
                            <input type="text" class="form-control" id="sample6_postcode" name="postcode" placeholder="우편번호" readonly>
                            <button type="button" class="btn btn-secondary" onclick="sample6_execDaumPostcode()">우편번호 찾기</button>
                        </div>
                        <div class="error-message" id="postcodeResultError"></div>
                    </div>
                </div>
                <div class="mb-3 row">
                    <label for="sample6_address" class="col-sm-4 col-form-label">기본주소</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" id="sample6_address" name="address" placeholder="주소" readonly>
                        <div class="error-message" id="userAddressError"></div>
                    </div>
                </div>
                <div class="mb-3 row">
                    <label for="sample6_detailAddress" class="col-sm-4 col-form-label">상세주소</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" id="sample6_detailAddress" name="detailAddress" placeholder="상세주소를 입력하세요">
                    </div>
                </div>                
                <div class="mb-3 row">
                    <label for="userPhone" class="col-sm-4 col-form-label">휴대전화</label>
                    <div class="col-sm-8">
                        <div class="input-group">
                            <select class="form-select" id="mobile1" name="mobile1">
                                <option value="010" selected>010</option>
                                <option value="011">011</option>
                                <option value="016">016</option>
                                <option value="017">017</option>
                                <option value="018">018</option>
                                <option value="019">019</option>
                            </select>
                            <input type="text" class="form-control" id="mobile2" name="mobile2">
                            <input type="text" class="form-control" id="mobile3" name="mobile3">
                        </div>
                        <div class="error-message" id="userPhoneError"></div>
                    </div>
                </div>
                <div class="mb-3 row">
                    <label for="userEmail" class="col-sm-4 col-form-label">이메일</label>
                    <div class="col-sm-8">
                        <input type="email" class="form-control" id="userEmail" name="email" placeholder="example@example.com">
                        <div class="error-message" id="userEmailError"></div>
                    </div>
                </div>
                
                <button type="submit" class="btn btn-primary w-100">가입하기</button>
            </form>
        </div>
    </div>
        
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>

    <script>
        function validateForm() {
            var userId = document.getElementById('userId');
            var userPw = document.getElementById('userPw');
            var confirmPw = document.getElementById('confirmPw');
            var userName = document.getElementById('userName');
            var postcodeResult = document.getElementById('sample6_postcode');
            var userAddress = document.getElementById('sample6_address');
            var userPhone2 = document.getElementById('mobile2');
            var userPhone3 = document.getElementById('mobile3');
            var userEmail = document.getElementById('userEmail');

            var idError = document.getElementById('idError');
            var passwordError = document.getElementById('passwordError');
            var confirmPwError = document.getElementById('confirmPwError');
            var nameError = document.getElementById('nameError');
            var postcodeResultError = document.getElementById('postcodeResultError');
            var userAddressError = document.getElementById('userAddressError');
            var userPhoneError = document.getElementById('userPhoneError');
            var userEmailError = document.getElementById('userEmailError');

            var isValid = true;
            
            idError.textContent = '';
            passwordError.textContent = '';
            confirmPwError.textContent = '';
            nameError.textContent = '';
            postcodeResultError.textContent = '';
            userAddressError.textContent = '';
            userPhoneError.textContent = '';
            userEmailError.textContent = '';

            if (!userId.value.match(/^[a-z0-9]{4,16}$/)) {
                idError.textContent = '아이디는 영문 소문자/숫자만 입력 가능하며, 4~16자여야 합니다.';
                isValid = false;
            }

            if (!userPw.value.match(/^(?=.*[a-zA-Z])(?=.*\d)(?=.*[~!@#$%^&*()_+|<>?:{}]).{10,16}$/)) {
                passwordError.textContent = '비밀번호는 영문 대소문자/숫자/특수문자 중 2가지 이상 조합하여야 하며, 10~16자여야 합니다.';
                isValid = false;
            }

            if (userPw.value !== confirmPw.value) {
                confirmPwError.textContent = '비밀번호와 비밀번호 확인이 일치하지 않습니다.';
                isValid = false;
            }

            if (userName.value.trim() === '') {
                nameError.textContent = '이름을 입력해주세요.';
                isValid = false;
            }

            if (postcodeResult.value.trim() === '') {
                postcodeResultError.textContent = '우편번호를 입력해주세요.';
                isValid = false;
            }

            if (userAddress.value.trim() === '') {
                userAddressError.textContent = '주소를 입력해주세요.';
                isValid = false;
            }

            if (!userPhone2.value.match(/^\d{3,4}$/) || !userPhone3.value.match(/^\d{4}$/)) {
                userPhoneError.textContent = '올바른 휴대전화 번호를 입력해주세요.';
                isValid = false;
            }

            if (userEmail.value.trim() === '') {
                userEmailError.textContent = '이메일을 입력해주세요.';
                isValid = false;
            }

            return isValid;
        }

        function sample6_execDaumPostcode() {
            new daum.Postcode({
                oncomplete: function(data) {
                    var fullAddress = data.address;
                    var extraAddress = '';

                    if (data.addressType === 'R') {
                        if (data.bname !== '') {
                            extraAddress += data.bname;
                        }
                        if (data.buildingName !== '') {
                            extraAddress += (extraAddress !== '' ? ', ' + data.buildingName : data.buildingName);
                        }
                        fullAddress += (extraAddress !== '' ? ' (' + extraAddress + ')' : '');
                    }
                    
                    document.getElementById('sample6_postcode').value = data.zonecode;
                    document.getElementById('sample6_address').value = fullAddress;
                    
                    document.getElementById('sample6_detailAddress').focus();
                }
            }).open();
        }
    </script>
</body>
</html>
